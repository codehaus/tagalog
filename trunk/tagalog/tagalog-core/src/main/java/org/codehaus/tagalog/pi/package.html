<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
		"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<!--
  $Id: package.html,v 1.2 2004-11-17 14:20:34 krisb Exp $
-->

<html>
<head>
  <title>package.html</title>
</head>
<body bgcolor="white">

<p>
  Handlers for processing instructions encountered while Tagalog is parsing
  XML documents.
  Processing instructions do not have namespaces attached to them,
  so there is no basis on which to map them onto a
  {@link org.codehaus.tagalog.TagLibrary}.
  Instead, all processing instructions are passed to an object that
  implements the {@link org.codehaus.tagalog.pi.PIHandler} interface.
  This object can then deal with the processing instruction in a
  suitable way.
</p>

<p>
  The optional processing instruction handler is registered by calling the
  {@link org.codehaus.tagalog.ParserConfiguration#setProcessingInstructionHandler}
  method.
  If this method is not called,
  or the value passed to the method is <code>null</code>,
  processing instructions will be ignored.
  The object passed to this method will be used for every parse,
  so it must be thread safe.
  Normally this implies that implementations of {@link org.codehaus.tagalog.pi.PIHandler}
  will have no state;
  instead they should store information in the context <code>Map</code>
  passed to the <code>processingInstruction</code> method.
</p>

<p>
  This package provides two sample implementations of the <code>PIHandler</code>
  interface.
  Both split the processing instruction into target and data sections,
  the target being all characters before the first whitespace.
  Both sample implementations extend an abstract implementation which is
  responsible for returning a suitable context to store the pis into - which
  is in turn stored in the parser context under a specified key.
  The <code>PIHandler</code> implementations are:
</p>

<dl>
  <dt>{@link org.codehaus.tagalog.pi.RecordAllPIHandler}</dt>
  <dd>
    Places data sections into a {@link java.util.List}, adding each data section
    to the end of the list.
    One <code>List</code> is created for each processing instruction target.
  </dd>
  <dt>{@link org.codehaus.tagalog.pi.RecordMostRecentPIHandler}</dt>
  <dd>
    Places data sections into the pi context <code>Map</code> as 
    {@link java.lang.String} values.
    Later data sections overwrite earlier ones.
  </dd>
</dl>

<p>
  Consider, for example, the following processing instructions:
</p>

<pre><code>  &lt;?foo value one?&gt;
  &lt;?bar hello?&gt;
  &lt;?foo two?&gt;</code></pre>

<p>
  After processing these instructions with the <code>RecordAllPIHandler</code>
  the pi context will contain an entry that maps <code>"foo"</code>
  to a <code>List</code> containing the <code>String</code>s
  <code>"value one"</code> and <code>"two"</code>.
  The pi context will also contain an entry mapping <code>"bar"</code>
  to a <code>List</code> containing <code>"hello"</code>.
</p>

<p>
  By comparison, after processing these instructions with the
  <code>RecordMostRecentPIHandler</code>
  the pi context will contain an entry that maps <code>"foo"</code>
  to the <code>String</code> <code>"two"</code>
  and an entry mapping <code>"bar"</code>
  to <code>"hello"</code>.
</p>

</body>
</html>
